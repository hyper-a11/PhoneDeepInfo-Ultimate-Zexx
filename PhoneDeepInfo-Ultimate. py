#!/usr/bin/env python3
import sys
import phonenumbers
from phonenumbers import geocoder, carrier, timezone
import requests
import webbrowser

NUMVERIFY_API_KEY = "YOUR_NUMVERIFY_API_KEY"  # Optional for extra accuracy
NUMVERIFY_URL = "http://apilayer.net/api/validate"
IP_API_URL = "http://ip-api.com/json/"

def phone_lookup(phone):
    num = phonenumbers.parse(phone, None)
    print("\n=== Phone Info ===")
    print(f"Country      : {phonenumbers.region_code_for_number(num)}")
    print(f"Valid        : {phonenumbers.is_valid_number(num)}")
    print(f"Possible     : {phonenumbers.is_possible_number(num)}")
    print(f"Carrier      : {carrier.name_for_number(num, 'en')}")
    print(f"Time Zones   : {timezone.time_zones_for_number(num)}")
    print(f"Geo (approx) : {geocoder.description_for_number(num, 'en')}")

def numverify_lookup(phone):
    print("\n=== NumVerify Lookup ===")
    params = {"access_key": NUMVERIFY_API_KEY, "number": phone}
    try:
        r = requests.get(NUMVERIFY_URL, params=params)
        data = r.json()
        if data.get("valid"):
            print(f"Location : {data.get('location')} ({data.get('country_name')})")
            print(f"Carrier  : {data.get('carrier')}")
        else:
            print("NumVerify lookup failed or API key missing.")
    except:
        print("NumVerify API not accessible.")

def social_media_search(phone):
    print("\n=== Social Media Search ===")
    sites = ["facebook.com", "linkedin.com", "instagram.com", "twitter.com"]
    for site in sites:
        url = f"https://www.google.com/search?q=\"{phone}\" site:{site}"
        print(f"[+] Searching {site}...")
        webbrowser.open(url)

def telegram_search(phone):
    print("\n=== Telegram Search ===")
    url = f"https://www.google.com/search?q=\"{phone}\" site:t.me OR site:telegram.me"
    print("[+] Searching Telegram profiles...")
    webbrowser.open(url)

def breach_lookup(phone):
    print("\n=== Breach DB Lookup ===")
    webbrowser.open(f"https://scylla.sh/search?q={phone}")
    webbrowser.open(f"https://dehashed.com/search?query={phone}")

def email_username_search(email):
    print("\n=== Email / Username OSINT ===")
    sites = ["facebook.com", "linkedin.com", "instagram.com", "github.com", "twitter.com"]
    for site in sites:
        url = f"https://www.google.com/search?q=\"{email}\" site:{site}"
        print(f"[+] Searching {site}...")
        webbrowser.open(url)

def ip_lookup(ip):
    print("\n=== IP Lookup ===")
    try:
        r = requests.get(IP_API_URL + ip)
        data = r.json()
        if data.get("status") == "success":
            print(f"IP        : {ip}")
            print(f"ISP       : {data.get('isp')}")
            print(f"City      : {data.get('city')}, {data.get('regionName')}, {data.get('country')}")
            print(f"Lat / Lon : {data.get('lat')}, {data.get('lon')}")
        else:
            print("IP lookup failed.")
    except:
        print("Could not fetch IP details.")

def main():
    if len(sys.argv) < 2:
        print("Usage: python phone_deep_info_ultimate.py +Phone [optional-ip]")
        sys.exit(1)

    phone = sys.argv[1]
    phone_lookup(phone)
    numverify_lookup(phone)
    social_media_search(phone)
    telegram_search(phone)
    breach_lookup(phone)

    email = input("\nEnter email from breach (if found) for deeper OSINT: ").strip()
    if email:
        email_username_search(email)

    if len(sys.argv) == 3:
        ip = sys.argv[2]
        ip_lookup(ip)

if __name__ == "__main__":
    main()
